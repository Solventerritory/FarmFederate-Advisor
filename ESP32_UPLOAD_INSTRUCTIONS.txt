â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     ESP32 FIRMWARE UPLOAD - ACTION REQUIRED            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ GOAL: Upload firmware to ESP32 to enable sensor monitoring and valve control

ğŸ“ CURRENT STATUS:
   âœ… Firmware file prepared with correct MQTT IP (192.168.0.195)
   âœ… ESP32 detected on COM7
   âœ… MQTT broker running
   âŒ Arduino IDE not found on your system
   âŒ Firmware not yet uploaded to ESP32

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“¥ STEP 1: INSTALL ARDUINO IDE (if not installed)

   Download: https://www.arduino.cc/en/software
   
   Choose: Windows Win 10 and newer, 64 bits
   Install: Run the installer (takes ~5 minutes)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ STEP 2: OPEN FIRMWARE FILE

   File location:
   C:\Users\USER_HP\Desktop\FarmFederate\FarmFederate-Advisor\backend\hardware\esp32_sensor_node\esp32_complete_sensors.ino
   
   In Arduino IDE: File â†’ Open â†’ [select the file above]

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœï¸ STEP 3: UPDATE WIFI CREDENTIALS (Lines 30-31)

   âš ï¸ CRITICAL - You must change these lines:
   
   FROM:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   const char* WIFI_SSID = "YOUR_WIFI_SSID";
   const char* WIFI_PASSWORD = "YOUR_WIFI_PASSWORD";
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   
   TO (example):
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   const char* WIFI_SSID = "MyHomeWiFi";           // â† Your WiFi name
   const char* WIFI_PASSWORD = "mypassword123";     // â† Your password
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   
   âš ï¸ IMPORTANT:
   â€¢ WiFi name is case-sensitive!
   â€¢ Use 2.4GHz WiFi (ESP32 doesn't support 5GHz)
   â€¢ Keep the quotes around the text

   âœ… ALREADY DONE FOR YOU:
   const char* MQTT_SERVER = "192.168.0.195";  // â† Correct IP!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”§ STEP 4: INSTALL ESP32 SUPPORT (First time only)

   In Arduino IDE:
   
   A. Add ESP32 Board Manager URL:
      File â†’ Preferences â†’ Additional Board Manager URLs
      Paste: https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json
      Click OK
   
   B. Install ESP32 Boards:
      Tools â†’ Board â†’ Boards Manager
      Search: "esp32"
      Install: "esp32" by Espressif Systems
      Wait for installation to complete

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š STEP 5: INSTALL REQUIRED LIBRARIES (First time only)

   Tools â†’ Manage Libraries
   
   Search and install these 4 libraries:
   1. "DHT sensor library" by Adafruit
   2. "Adafruit Unified Sensor" by Adafruit  
   3. "PubSubClient" by Nick O'Leary
   4. "ArduinoJson" by Benoit Blanchon

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš™ï¸ STEP 6: CONFIGURE ARDUINO IDE

   Set these options in the Tools menu:
   
   Tools â†’ Board â†’ ESP32 Arduino â†’ ESP32 Dev Module
   Tools â†’ Port â†’ COM7
   Tools â†’ Upload Speed â†’ 115200

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â¬†ï¸ STEP 7: UPLOAD FIRMWARE

   1. Click the Upload button (â†’ arrow icon at top)
   2. Wait for compilation (first time takes ~2 minutes)
   3. Wait for upload progress bar
   4. Look for "Done uploading" message
   
   If upload fails:
   â€¢ Hold BOOT button on ESP32 while clicking Upload
   â€¢ Try a different USB cable (must support data)
   â€¢ Close Serial Monitor if open

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… STEP 8: VERIFY UPLOAD SUCCESS

   1. Click Serial Monitor icon (magnifying glass at top right)
   2. Set baud rate dropdown to "115200"
   3. Press RESET button on ESP32
   
   You should see:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ âœ“ WiFi connected successfully!                              â”‚
   â”‚ IP Address: 192.168.X.X                                      â”‚
   â”‚ Signal Strength: -45 dBm                                     â”‚
   â”‚ âœ“ MQTT connected successfully!                              â”‚
   â”‚ âœ“ Subscribed to: farmfederate/control/relay                 â”‚
   â”‚ âœ“ Temperature: 24.5 Â°C                                       â”‚
   â”‚ âœ“ Humidity: 68.2 %                                           â”‚
   â”‚ âœ“ Soil Moisture: 45.0 %                                      â”‚
   â”‚ âœ“ Flow Rate: 0.0 L/min                                       â”‚
   â”‚ âœ“ Data published successfully!                              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ§ª STEP 9: TEST FROM COMMAND LINE

   Run this command to verify all sensors:
   
   python backend/check_sensors_usb.py
   
   Or verify via MQTT:
   
   python backend/diagnose_sensors.py

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‰ AFTER SUCCESSFUL UPLOAD:

   Your system will have:
   âœ… 5 sensors actively monitoring
   âœ… Valve control working via MQTT
   âœ… Real-time data flowing to backend
   âœ… All automation features enabled

   Test valve control:
   python backend/valve_controller.py open   # Open valve
   python backend/valve_controller.py close  # Close valve

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ TROUBLESHOOTING:

   Problem: WiFi not connecting
   Solution: Check SSID spelling, password, use 2.4GHz WiFi only

   Problem: MQTT not connecting  
   Solution: Verify IP is 192.168.0.195, check firewall

   Problem: Upload failed
   Solution: Hold BOOT button, try different USB port/cable

   Problem: No sensor data
   Solution: Check wiring, verify GPIO pins match firmware

   Run full diagnostic:
   python backend/troubleshoot_esp32.py

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ—‚ï¸ IMPORTANT FILES:

   Firmware: backend/hardware/esp32_sensor_node/esp32_complete_sensors.ino
   Wiring:   backend/hardware/README.md
   Guide:    UPLOAD_FIRMWARE_NOW.md
   Status:   ESP32_SENSOR_STATUS.md

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â±ï¸ ESTIMATED TIME: 10-20 minutes (first time with library installation)

ğŸ¯ WHAT YOU MUST DO: Update WiFi SSID and Password in lines 30-31, then upload!
